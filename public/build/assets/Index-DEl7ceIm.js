import{r as l,m as f,S as b,j as e,$ as c,L as g}from"./app-kJd0IbDP.js";import{P as x,C as u,A as y}from"./AuthenticatedLayout-W4SJNb0d.js";import{T as v}from"./TextInput-2Zxn4f6N.js";import{l as N}from"./lodash-iefIKYHf.js";import{P as w}from"./PrimaryButton-BVnvhlTS.js";function k({title:s,titleId:t,...n},o){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},n),s?l.createElement("title",{id:t},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"}))}const m=l.forwardRef(k);function C({item:s}){const t=f({option_ids:s.option_ids}),[n,o]=l.useState(""),[r,i]=l.useState(s.quantity),h=()=>{t.delete(route("cart.destroy",s.product_id),{preserveScroll:!0})},p=l.useCallback(N.debounce(a=>{b.put(route("cart.update",s.product_id),{quantity:a,option_ids:s.option_ids},{preserveScroll:!0,onError:d=>{d.quantity&&o(Object.values(d.quantity)[0])}})},700),[]),j=a=>{const d=Number(a.target.value);o(""),i(d),p(d)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col md:flex-row items-start gap-6 p-6 w-full bg-white shadow-md rounded-xl border border-gray-200 hover:shadow-lg transition",children:[e.jsx(c,{href:x(s),className:"w-full md:w-32 h-32 flex justify-center items-center bg-gray-50 border rounded-lg overflow-hidden",children:e.jsx("img",{src:s.image,alt:s.title,className:"max-w-full max-h-full object-contain transition-transform duration-200 hover:scale-105"})}),e.jsxs("div",{className:"flex flex-col justify-between flex-1 w-full",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"mb-2 text-lg font-semibold text-gray-900 hover:underline",children:e.jsx(c,{href:x(s),children:s.title})}),e.jsx("div",{className:"text-sm text-gray-600 space-y-1",children:s.options.map(a=>e.jsxs("div",{children:[e.jsxs("span",{className:"font-bold",children:[a.type.name,":"]}),"  ",e.jsx("span",{className:"",children:a.name})]},a.id))})]}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mt-5 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx("div",{className:"text-sm font-medium",children:"Qty:"}),e.jsx("div",{className:n?"tooltip tooltip-open tooltip-error":"","data-tip":n,children:e.jsx(v,{type:"number",defaultValue:r,onChange:j,className:"input-sm w-16"})}),e.jsx("button",{onClick:()=>h(),className:"btn btn-sm btn-ghost text-red-500",children:"Delete"}),e.jsx("button",{className:"btn btn-sm btn-ghost text-purple-600",children:"Save for Later"})]}),e.jsx("div",{className:"text-lg font-bold text-gray-800 min-w-max",children:e.jsx(u,{amount:s.price*s.quantity})})]})]})]},s.id)})}function P({csrf_token:s,cartItems:t,totalQuantity:n,totalPrice:o}){return e.jsxs(y,{children:[e.jsx(g,{title:"Your Cart"}),e.jsxs("div",{className:"container max-auto p-8 flex flex-col lg:flex-row gap-4",children:[e.jsx("div",{className:"card flex-1 bg-white dark:bg-gray-800 order-2 lg:order-1",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Shopping Cart"}),e.jsxs("div",{className:"my-4",children:[Object.keys(t).length===0&&e.jsx("div",{className:"py-2 text-gray-500 text-center",children:"You don't have any items yet."}),Object.values(t).map(r=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between pb-4 border-b border-gray-300 mb-4",children:[e.jsx(c,{href:"/",className:"underline",children:r.user.name}),e.jsx("div",{children:e.jsxs("form",{action:route("cart.checkout"),method:"post",children:[e.jsx("input",{type:"hidden",name:"_token",value:s}),e.jsx("input",{type:"hidden",name:"vendor_id",value:r.user.id}),e.jsxs("button",{className:"btn btn-sm btn-ghost",children:[e.jsx(m,{className:"size-6"}),"Pay Only for this seller"]})]})})]}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex flex-col gap-4 w-full pb-4 border-b border-gray-300 mb-4",children:r.items.map(i=>e.jsx(C,{item:i},i.id))})},r.user.id)]},r.user.id))]})]})}),e.jsx("div",{className:"card bg-white dark:bg-gray-800 lg:min-w-[260px] order-1 lg:order-2",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("span",{children:["Subtotal (",n," items): Â "]}),e.jsx(u,{amount:o}),e.jsxs("form",{action:route("cart.checkout"),method:"post",children:[e.jsx("input",{type:"hidden",name:"_token",value:s}),e.jsxs(w,{className:"rounded-full",children:[e.jsx(m,{className:"size-6 pr-2"}),"Proceed to checkout"]})]})]})})]})]})}export{P as default};
