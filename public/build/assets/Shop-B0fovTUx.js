import{j as e,$ as m,r as d,S,L as C}from"./app-9WHcwt9K.js";import{A as F}from"./AuthenticatedLayout-D8nTQdBA.js";import{F as j,a as L,P}from"./ProductItem-oZyRTWDS.js";import{l as _}from"./lodash-h6k5vO2C.js";import"./iconBase-CLculi1J.js";function k({links:t,currentPage:r,lastPage:l}){var n,a;return l<=1?null:e.jsxs("nav",{className:"flex items-center justify-between border-t border-gray-200 px-4 sm:px-0 mt-6",children:[e.jsxs("div",{className:"flex flex-1 justify-between sm:hidden",children:[r>1&&e.jsx(m,{href:((n=t.find(s=>s.label.toLowerCase().includes("previous")))==null?void 0:n.url)||"",preserveState:!0,className:"inline-flex items-center border-t-2 border-transparent px-4 pt-4 text-sm font-medium text-gray-500 hover:border-gray-300 hover:text-gray-700",children:"Previous"}),r<l&&e.jsx(m,{href:((a=t.find(s=>s.label.toLowerCase().includes("next")))==null?void 0:a.url)||"",preserveState:!0,className:"inline-flex items-center border-t-2 border-transparent px-4 pt-4 text-sm font-medium text-gray-500 hover:border-gray-300 hover:text-gray-700",children:"Next"})]}),e.jsx("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-center",children:e.jsx("div",{children:e.jsx("nav",{className:"isolate inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination",children:t.map((s,i)=>s.url?e.jsx(m,{href:s.url,preserveState:!0,className:`relative inline-flex items-center px-4 py-2 text-sm font-medium ${s.active?"z-10 bg-primary text-white focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary":"text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:outline-offset-0"}`,dangerouslySetInnerHTML:{__html:s.label}},i):null)})})})]})}function M(){return e.jsx("div",{className:"relative w-full h-64 bg-cover bg-center",style:{backgroundImage:"url('/images/shop-hero.jpg')"},children:e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:e.jsx("h1",{className:"text-white text-3xl font-bold",children:"Welcome to Our Shop"})})})}function A({categories:t,selectedCategory:r,setSelectedCategory:l,setShowCategoryModal:n}){const a=t==null?void 0:t.slice(0,5);return e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h2",{className:"text-md font-semibold",children:"Categories"}),(t==null?void 0:t.length)>5&&e.jsx("button",{onClick:()=>n(!0),className:"text-sm text-blue-500",children:"Browse All"})]}),e.jsx("ul",{className:"space-y-1",children:a==null?void 0:a.map(s=>e.jsx("li",{children:e.jsx("button",{className:`w-full text-left text-sm flex justify-between items-center p-1 ${r===s.id?"font-semibold text-primary":"text-gray-700"}`,onClick:()=>l(r===s.id?null:s.id),children:e.jsxs("span",{children:[s.name," (",s.products_count,")"]})})},s.id))}),r&&e.jsx("div",{className:"mt-3 pt-2 border-t border-gray-100",children:e.jsx("button",{onClick:()=>l(null),className:"w-full text-left text-sm text-blue-500 font-medium p-1 hover:bg-gray-50 rounded",children:"Show All Products"})})]})}function $({priceRange:t,handlePriceChange:r}){return e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-md font-semibold mb-3",children:"Price Range"}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:"0",max:"10000",value:t[0],onChange:l=>r(l,0),className:"w-full p-2 border rounded text-sm",placeholder:"Min"}),e.jsx("span",{className:"text-gray-500",children:"to"}),e.jsx("input",{type:"number",min:"0",max:"10000",value:t[1],onChange:l=>r(l,1),className:"w-full p-2 border rounded text-sm",placeholder:"Max"})]})})]})}function E({show:t,onClose:r,categories:l,selectedCategory:n,setSelectedCategory:a,searchTerm:s,setSearchTerm:i}){const x=l==null?void 0:l.filter(c=>c.name.toLowerCase().includes(s.toLowerCase()));return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md max-h-[80vh] flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Select Category"}),e.jsx("button",{onClick:r,className:"text-gray-500",children:e.jsx(j,{})})]}),e.jsxs("div",{className:"relative mt-2",children:[e.jsx("input",{type:"text",placeholder:"Search categories...",value:s,onChange:c=>i(c.target.value),className:"w-full p-2 pl-8 border rounded text-sm"}),e.jsx(L,{className:"absolute left-2 top-3 text-gray-400"})]})]}),e.jsx("div",{className:"overflow-y-auto flex-1",children:e.jsx("ul",{className:"divide-y",children:x==null?void 0:x.map(c=>e.jsx("li",{children:e.jsxs("button",{className:`w-full text-left p-3 text-sm ${n===c.id?"bg-blue-50 text-primary font-medium":"text-gray-700"}`,onClick:()=>{a(c.id),r()},children:[c.name," (",c.products_count,")"]})},c.id))})}),e.jsx("div",{className:"p-4 border-t",children:e.jsx("button",{onClick:()=>{a(null),r()},className:"w-full py-2 text-sm text-blue-500",children:"Clear Selection"})})]})}):null}function H({isFiltering:t,selectedCategory:r,filters:l,onClearCategory:n}){var a,s;return e.jsxs("div",{className:"flex items-center space-x-2",children:[t&&e.jsx("div",{className:"text-sm text-gray-500",children:"Applying filters..."}),r&&e.jsxs("div",{className:"flex items-center bg-gray-100 rounded px-2 py-1 text-sm",children:["Category:"," ",(s=(a=l.categories)==null?void 0:a.find(i=>i.id===r))==null?void 0:s.name,e.jsx("button",{onClick:n,className:"ml-1 text-gray-500 hover:text-gray-700",children:e.jsx(j,{size:12})})]})]})}function I({selectedSort:t,onSortChange:r,disabled:l}){return e.jsxs("select",{value:t,onChange:n=>r(n.target.value),className:"p-2 rounded border text-sm",disabled:l,children:[e.jsx("option",{value:"",children:"Sort By"}),e.jsx("option",{value:"price_asc",children:"Price Low to High"}),e.jsx("option",{value:"price_desc",children:"Price High to Low"}),e.jsx("option",{value:"latest",children:"Latest"})]})}function T({isFiltering:t,selectedCategory:r,filters:l,onClearCategory:n,selectedSort:a,onSortChange:s}){return e.jsxs("div",{className:"flex justify-between items-center mb-4 bg-white p-3 rounded shadow",children:[e.jsx(H,{isFiltering:t,selectedCategory:r,filters:l,onClearCategory:n}),e.jsx(I,{selectedSort:a,onSortChange:s,disabled:t})]})}function V({products:t,filters:r}){const[l,n]=d.useState(null),[a,s]=d.useState(""),[i,x]=d.useState([0,1e4]),[c,u]=d.useState(!1),[b,g]=d.useState(""),[v,h]=d.useState(!1),f=d.useCallback(_.debounce(o=>{S.get(route("shop"),o,{preserveScroll:!0,preserveState:!0,onFinish:()=>h(!1)})},600),[]);d.useEffect(()=>{h(!0),f({category:l,sort:a,price_min:i[0],price_max:i[1]})},[l,a,i,f]);const y=(o,N)=>{const p=[...i],w=parseInt(o.target.value)||0;p[N]=Math.min(Math.max(w,0),1e4),x(p)};return e.jsxs(F,{children:[e.jsx(C,{title:"Shop"}),e.jsx(M,{}),e.jsxs("div",{className:"flex flex-col md:flex-row px-4 py-6 gap-6 bg-gray-50",children:[e.jsxs("div",{className:"w-full md:w-1/5 bg-white p-4 rounded shadow",children:[e.jsx(A,{categories:r.categories,selectedCategory:l,setSelectedCategory:n,setShowCategoryModal:u}),e.jsx($,{priceRange:i,handlePriceChange:y})]}),e.jsxs("div",{className:"w-full md:w-4/5",children:[e.jsx(T,{isFiltering:v,selectedCategory:l,filters:r,onClearCategory:()=>n(null),selectedSort:a,onSortChange:o=>s(o)}),t.data.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:t.data.map(o=>e.jsx(P,{product:o},o.id))}),e.jsx(k,{links:t.links,currentPage:t.meta.current_page,lastPage:t.meta.last_page})]}):e.jsxs("div",{className:"bg-white p-8 text-center rounded shadow",children:[e.jsx("p",{className:"text-gray-500",children:"No products found matching your filters."}),e.jsx("button",{onClick:()=>{n(null),s(""),x([0,1e4])},className:"mt-4 text-primary text-sm font-medium",children:"Clear all filters"})]})]})]}),e.jsx(E,{show:c,onClose:()=>u(!1),categories:r.categories,selectedCategory:l,setSelectedCategory:n,searchTerm:b,setSearchTerm:g})]})}export{V as default};
