import{j as e,r as d,S as y,L as S}from"./app-kJd0IbDP.js";import{A as C}from"./AuthenticatedLayout-W4SJNb0d.js";import{F as j,a as k,P}from"./ProductItem-BWjSD-RP.js";import{P as F}from"./Pagination-Cc2qlCXO.js";import{l as L}from"./lodash-iefIKYHf.js";import"./iconBase-Brf-aoCc.js";function _(){return e.jsx("div",{className:"relative w-full h-64 bg-cover bg-center",style:{backgroundImage:"url('/images/shop-hero.jpg')"},children:e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:e.jsx("h1",{className:"text-white text-3xl font-bold",children:"Welcome to Our Shop"})})})}function M({categories:s,selectedCategory:l,setSelectedCategory:t,setShowCategoryModal:n}){const r=s==null?void 0:s.slice(0,5);return e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h2",{className:"text-md font-semibold",children:"Categories"}),(s==null?void 0:s.length)>5&&e.jsx("button",{onClick:()=>n(!0),className:"text-sm text-blue-500",children:"Browse All"})]}),e.jsx("ul",{className:"space-y-1",children:r==null?void 0:r.map(a=>e.jsx("li",{children:e.jsx("button",{className:`w-full text-left text-sm flex justify-between items-center p-1 ${l===a.id?"font-semibold text-primary":"text-gray-700"}`,onClick:()=>t(l===a.id?null:a.id),children:e.jsxs("span",{children:[a.name," (",a.products_count,")"]})})},a.id))}),l&&e.jsx("div",{className:"mt-3 pt-2 border-t border-gray-100",children:e.jsx("button",{onClick:()=>t(null),className:"w-full text-left text-sm text-blue-500 font-medium p-1 hover:bg-gray-50 rounded",children:"Show All Products"})})]})}function A({priceRange:s,handlePriceChange:l}){return e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-md font-semibold mb-3",children:"Price Range"}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:"0",max:"10000",value:s[0],onChange:t=>l(t,0),className:"w-full p-2 border rounded text-sm",placeholder:"Min"}),e.jsx("span",{className:"text-gray-500",children:"to"}),e.jsx("input",{type:"number",min:"0",max:"10000",value:s[1],onChange:t=>l(t,1),className:"w-full p-2 border rounded text-sm",placeholder:"Max"})]})})]})}function E({show:s,onClose:l,categories:t,selectedCategory:n,setSelectedCategory:r,searchTerm:a,setSearchTerm:c}){const m=t==null?void 0:t.filter(i=>i.name.toLowerCase().includes(a.toLowerCase()));return s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md max-h-[80vh] flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Select Category"}),e.jsx("button",{onClick:l,className:"text-gray-500",children:e.jsx(j,{})})]}),e.jsxs("div",{className:"relative mt-2",children:[e.jsx("input",{type:"text",placeholder:"Search categories...",value:a,onChange:i=>c(i.target.value),className:"w-full p-2 pl-8 border rounded text-sm"}),e.jsx(k,{className:"absolute left-2 top-3 text-gray-400"})]})]}),e.jsx("div",{className:"overflow-y-auto flex-1",children:e.jsx("ul",{className:"divide-y",children:m==null?void 0:m.map(i=>e.jsx("li",{children:e.jsxs("button",{className:`w-full text-left p-3 text-sm ${n===i.id?"bg-blue-50 text-primary font-medium":"text-gray-700"}`,onClick:()=>{r(i.id),l()},children:[i.name," (",i.products_count,")"]})},i.id))})}),e.jsx("div",{className:"p-4 border-t",children:e.jsx("button",{onClick:()=>{r(null),l()},className:"w-full py-2 text-sm text-blue-500",children:"Clear Selection"})})]})}):null}function I({isFiltering:s,selectedCategory:l,filters:t,onClearCategory:n}){var r,a;return e.jsxs("div",{className:"flex items-center space-x-2",children:[s&&e.jsx("div",{className:"text-sm text-gray-500",children:"Applying filters..."}),l&&e.jsxs("div",{className:"flex items-center bg-gray-100 rounded px-2 py-1 text-sm",children:["Category:"," ",(a=(r=t.categories)==null?void 0:r.find(c=>c.id===l))==null?void 0:a.name,e.jsx("button",{onClick:n,className:"ml-1 text-gray-500 hover:text-gray-700",children:e.jsx(j,{size:12})})]})]})}function H({selectedSort:s,onSortChange:l,disabled:t}){return e.jsxs("select",{value:s,onChange:n=>l(n.target.value),className:"p-2 rounded border text-sm",disabled:t,children:[e.jsx("option",{value:"",children:"Sort By"}),e.jsx("option",{value:"price_asc",children:"Price Low to High"}),e.jsx("option",{value:"price_desc",children:"Price High to Low"}),e.jsx("option",{value:"latest",children:"Latest"})]})}function R({isFiltering:s,selectedCategory:l,filters:t,onClearCategory:n,selectedSort:r,onSortChange:a}){return e.jsxs("div",{className:"flex justify-between items-center mb-4 bg-white p-3 rounded shadow",children:[e.jsx(I,{isFiltering:s,selectedCategory:l,filters:t,onClearCategory:n}),e.jsx(H,{selectedSort:r,onSortChange:a,disabled:s})]})}function V({products:s,filters:l}){const[t,n]=d.useState(null),[r,a]=d.useState(""),[c,m]=d.useState([0,1e4]),[i,x]=d.useState(!1),[f,b]=d.useState(""),[g,u]=d.useState(!1),h=d.useCallback(L.debounce(o=>{y.get(route("shop"),o,{preserveScroll:!0,preserveState:!0,onFinish:()=>u(!1)})},600),[]);d.useEffect(()=>{u(!0),h({category:t,sort:r,price_min:c[0],price_max:c[1]})},[t,r,c,h]);const v=(o,N)=>{const p=[...c],w=parseInt(o.target.value)||0;p[N]=Math.min(Math.max(w,0),1e4),m(p)};return e.jsxs(C,{children:[e.jsx(S,{title:"Shop"}),e.jsx(_,{}),e.jsxs("div",{className:"flex flex-col md:flex-row px-4 py-6 gap-6 bg-gray-50",children:[e.jsxs("div",{className:"w-full md:w-1/5 bg-white p-4 rounded shadow",children:[e.jsx(M,{categories:l.categories,selectedCategory:t,setSelectedCategory:n,setShowCategoryModal:x}),e.jsx(A,{priceRange:c,handlePriceChange:v})]}),e.jsxs("div",{className:"w-full md:w-4/5",children:[e.jsx(R,{isFiltering:g,selectedCategory:t,filters:l,onClearCategory:()=>n(null),selectedSort:r,onSortChange:o=>a(o)}),s.data.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:s.data.map(o=>e.jsx(P,{product:o},o.id))}),e.jsx(F,{links:s.links,currentPage:s.meta.current_page,lastPage:s.meta.last_page})]}):e.jsxs("div",{className:"bg-white p-8 text-center rounded shadow",children:[e.jsx("p",{className:"text-gray-500",children:"No products found matching your filters."}),e.jsx("button",{onClick:()=>{n(null),a(""),m([0,1e4])},className:"mt-4 text-primary text-sm font-medium",children:"Clear all filters"})]})]})]}),e.jsx(E,{show:i,onClose:()=>x(!1),categories:l.categories,selectedCategory:t,setSelectedCategory:n,searchTerm:f,setSearchTerm:b})]})}export{V as default};
